(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8775],{35614:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create_bot",function(){return n(98512)}])},53387:function(e,a,n){"use strict";var i,t,l,o,r,d,s,m,u,c,_,p,g,k,b,v,f,h,y,F,S,w,N,B,L,C,V;n.r(a);let G={fragment:{argumentDefinitions:[i={defaultValue:null,kind:"LocalArgument",name:"allowRelatedBotRecommendations"},t={defaultValue:null,kind:"LocalArgument",name:"apiKey"},l={defaultValue:null,kind:"LocalArgument",name:"apiUrl"},o={defaultValue:null,kind:"LocalArgument",name:"baseBotId"},r={defaultValue:null,kind:"LocalArgument",name:"customMessageLimit"},d={defaultValue:null,kind:"LocalArgument",name:"description"},s={defaultValue:null,kind:"LocalArgument",name:"displayName"},m={defaultValue:null,kind:"LocalArgument",name:"handle"},u={defaultValue:null,kind:"LocalArgument",name:"hasMarkdownRendering"},c={defaultValue:null,kind:"LocalArgument",name:"hasSuggestedReplies"},_={defaultValue:null,kind:"LocalArgument",name:"introduction"},p={defaultValue:null,kind:"LocalArgument",name:"inviteCodeReqHash"},g={defaultValue:null,kind:"LocalArgument",name:"isApiBot"},k={defaultValue:null,kind:"LocalArgument",name:"isPrivateBot"},b={defaultValue:null,kind:"LocalArgument",name:"isPromptPublic"},v={defaultValue:null,kind:"LocalArgument",name:"knowledgeSourceIds"},f={defaultValue:null,kind:"LocalArgument",name:"messagePriceCc"},h={defaultValue:null,kind:"LocalArgument",name:"model"},y={defaultValue:null,kind:"LocalArgument",name:"profilePictureUrl"},F={defaultValue:null,kind:"LocalArgument",name:"prompt"},S={defaultValue:null,kind:"LocalArgument",name:"shouldCiteSources"},w={defaultValue:null,kind:"LocalArgument",name:"temperature"}],kind:"Fragment",name:"CreateBotMain_poeBotCreate_Mutation",selections:[{args:N=[{kind:"Variable",name:"allowRelatedBotRecommendations",variableName:"allowRelatedBotRecommendations"},{kind:"Variable",name:"apiKey",variableName:"apiKey"},{kind:"Variable",name:"apiUrl",variableName:"apiUrl"},{kind:"Variable",name:"baseBotId",variableName:"baseBotId"},{kind:"Variable",name:"customMessageLimit",variableName:"customMessageLimit"},{kind:"Variable",name:"description",variableName:"description"},{kind:"Variable",name:"displayName",variableName:"displayName"},{kind:"Variable",name:"handle",variableName:"handle"},{kind:"Variable",name:"hasMarkdownRendering",variableName:"hasMarkdownRendering"},{kind:"Variable",name:"hasSuggestedReplies",variableName:"hasSuggestedReplies"},{kind:"Variable",name:"introduction",variableName:"introduction"},{kind:"Variable",name:"inviteCodeReqHash",variableName:"inviteCodeReqHash"},{kind:"Variable",name:"isApiBot",variableName:"isApiBot"},{kind:"Variable",name:"isPrivateBot",variableName:"isPrivateBot"},{kind:"Variable",name:"isPromptPublic",variableName:"isPromptPublic"},{kind:"Variable",name:"knowledgeSourceIds",variableName:"knowledgeSourceIds"},{kind:"Variable",name:"messagePriceCc",variableName:"messagePriceCc"},{kind:"Variable",name:"model",variableName:"model"},{kind:"Variable",name:"profilePicture",variableName:"profilePictureUrl"},{kind:"Variable",name:"promptPlaintext",variableName:"prompt"},{kind:"Variable",name:"shouldCiteSources",variableName:"shouldCiteSources"},{kind:"Variable",name:"temperature",variableName:"temperature"}],concreteType:"PoeBotCreate",kind:"LinkedField",name:"poeBotCreate",plural:!1,selections:[B={kind:"ScalarField",name:"status"},L={kind:"ScalarField",name:"statusMessage"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[C={kind:"ScalarField",name:"id"},V={kind:"ScalarField",name:"viewerIsFollower"},{kind:"FragmentSpread",name:"BotHeader_bot"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[h,s,m,F,b,_,d,y,l,t,g,u,c,k,w,o,r,v,f,S,i,p],kind:"Operation",name:"CreateBotMain_poeBotCreate_Mutation",selections:[{args:N,concreteType:"PoeBotCreate",kind:"LinkedField",name:"poeBotCreate",plural:!1,selections:[B,L,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[C,V,{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"displayName"},{kind:"LinkedField",name:"picture",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"canUserAccessBot"},{kind:"TypeDiscriminator",abstractKey:"__isNode"}]}]}]},params:{id:"f967935a5365e1036bef792838e39b6ba6c064096d8d6a8eb5d4f3b316f28438",metadata:{},name:"CreateBotMain_poeBotCreate_Mutation",operationKind:"mutation",text:null}};G.hash="173f2d83ced94fec4f57f2b0e1f1f4a9",a.default=G},44036:function(e,a,n){"use strict";n.r(a);let i={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",name:"CreateBotMain_queryRoot",selections:[{kind:"ScalarField",name:"randomizedAvailableBotHandle"},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"enableBotEditReminder",args:[{kind:"Literal",name:"gateName",value:"poe_web_should_show_bot_profile_edit_reminder"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_should_show_bot_profile_edit_reminder")'},{alias:"privateBotsOnProfileGateEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_show_private_bots_on_viewer_profile"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_show_private_bots_on_viewer_profile")'},{kind:"FragmentSpread",name:"BotInfoForm_viewer"}]},{args:[{kind:"Variable",name:"messageId",variableName:"messageId"}],concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{kind:"ScalarField",name:"text"}]}],type:"QueryRoot"};i.hash="fa98d41977ac02c2700c962284c4e4ba",a.default=i},10621:function(e,a,n){"use strict";var i,t,l;n.r(a);let o={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"messageId"}],kind:"Fragment",name:"createBotIndexPageQuery",selections:[{args:t=[{kind:"Variable",name:"messageId",variableName:"messageId"}],kind:"FragmentSpread",name:"CreateBotMain_queryRoot"}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"createBotIndexPageQuery",selections:[{kind:"ScalarField",name:"randomizedAvailableBotHandle"},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"enableBotEditReminder",args:[{kind:"Literal",name:"gateName",value:"poe_web_should_show_bot_profile_edit_reminder"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_should_show_bot_profile_edit_reminder")'},{alias:"privateBotsOnProfileGateEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_show_private_bots_on_viewer_profile"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_show_private_bots_on_viewer_profile")'},{concreteType:"Bot",kind:"LinkedField",name:"botsAllowedForUserCreation",plural:!0,selections:[{kind:"ScalarField",name:"displayName"},{kind:"ScalarField",name:"model"},{kind:"ScalarField",name:"baseModelDisplayName"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"maxTokensForPrompt"},{kind:"ScalarField",name:"maxTokensForIntroduction"},{kind:"ScalarField",name:"modelDefaultTemperature"},{kind:"ScalarField",name:"modelMaxTemperature"},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"isImageGen"},{kind:"ScalarField",name:"isVideoGen"},{kind:"ScalarField",name:"isRoleplayBot"},{kind:"ScalarField",name:"showAdvancedFieldsAsBaseBot"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"deletionState"},{kind:"LinkedField",name:"picture",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},l={kind:"ScalarField",name:"id"},{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{kind:"ScalarField",name:"displayMessagePointPrice"},l]}]},{alias:"decoupleBotHandleAndName",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_bot_handle_display_name_decoupling"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_bot_handle_display_name_decoupling")'},{alias:"disableKBForMixtral",args:[{kind:"Literal",name:"gateName",value:"poe_disable_knowledge_base_for_mixtral"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_disable_knowledge_base_for_mixtral")'},{kind:"ScalarField",name:"isEnrolledInRevshare"},{kind:"ScalarField",name:"isEnrolledInMessageRevshare"},{kind:"ScalarField",name:"shouldSeeRevshareEntryPoints"},{alias:"maxMessageRevshareMarkupCC",args:[{kind:"Literal",name:"gateName",value:"poe_message_revshare_max_markup"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_message_revshare_max_markup")'},{alias:"showKnowledgeBaseSection",args:[{kind:"Literal",name:"gateName",value:"poe_enable_knowledge_sources"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_knowledge_sources")'},{alias:"canEditMessagePrice",args:[{kind:"Literal",name:"gateName",value:"poe_revshare_message_prices"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_revshare_message_prices")'},{alias:"shouldSeeMessageRevshareChanges",args:[{kind:"Literal",name:"gateName",value:"poe_enable_message_revshare"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_message_revshare")'},{alias:"inChatRecommendationsEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_allows_in_chat_recommendations"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_allows_in_chat_recommendations")'},{alias:"androidCreatorsHubMinBuildNumber",args:[{kind:"Literal",name:"gateName",value:"poe_android_creators_hub_min_build_number"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_android_creators_hub_min_build_number")'},{alias:"iosCreatorsHubMinBuildNumber",args:[{kind:"Literal",name:"gateName",value:"poe_ios_creators_hub_min_build_number"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_ios_creators_hub_min_build_number")'},{alias:"showInviteLinkOption",args:[{kind:"Literal",name:"gateName",value:"poe_web_private_bot_invite_link"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_private_bot_invite_link")'},{alias:"newCreationFlowGateEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_bot_creation_flow_phase_3"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_bot_creation_flow_phase_3")'},{alias:"videoBotCategoryEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_bot_creation_show_video_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_bot_creation_show_video_bots")'},{alias:"showCountryExpansionUi",args:[{kind:"Literal",name:"gateName",value:"poe_msg_revshare_country_expansion_ui"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_msg_revshare_country_expansion_ui")'},{alias:"enableSafariPhotoSelectionFix",args:[{kind:"Literal",name:"gateName",value:"poe_web_client_side_knowledge_base_validation_safari"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_client_side_knowledge_base_validation_safari")'},{kind:"ScalarField",name:"knowledgeBaseSizeLimit"},{alias:"hasDisclaimer",args:[{kind:"Literal",name:"gateName",value:"poe_kbppb_description_include_disclaimer"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_kbppb_description_include_disclaimer")'},l]},{args:t,concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[{kind:"ScalarField",name:"text"},l]}]},params:{id:"051e9ee5b61e9780dd7cd190116e98e8bf91270172e47e0adb18a119f8d9d510",metadata:{},name:"createBotIndexPageQuery",operationKind:"query",text:null}};o.hash="c748730d97b76d53adfe551f8d2afc22",a.default=o},98512:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return G}});var i,t,l=n(85893),o=n(11163),r=n(22120);n(44311);var d=n(41664),s=n.n(d),m=n(67294),u=n(22578),c=n(45549),_=n(37650),p=n(74929),g=n(80393),k=n(47986),b=n(50530),v=n(61794),f=n(37115);(i=t||(t={})).success="success",i.handle_already_taken="handle_already_taken",i.temperature_invalid="temperature_invalid",i.api_bot_temperature_not_supported="api_bot_temperature_not_supported",i.display_name_too_long="display_name_too_long",i.display_name_empty="display_name_empty",i.other_failure="other_failure",i.invalid_knowledge_source="invalid_knowledge_source",i.bot_content_moderated="bot_content_moderated",i.introduction_exceed_token_limit="introduction_exceed_token_limit",i.prompt_exceed_token_limit="prompt_exceed_token_limit",i.knowledge_base_too_large="knowledge_base_too_large",i.creator_nux_incomplete="creator_nux_incomplete";var h=t,y=n(75704),F=n(19929),S=n(75256);let useAddBot=function(){let{privateBotsOnProfileGateEnabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{t:a}=(0,r.$G)(),[i,t]=(0,m.useState)(!1),[l]=(0,u.useMutation)(n(53387)),d=(0,c.ZP)(),s=(0,o.useRouter)(),g=(0,f.F)(),y=(0,m.useCallback)(n=>{let{baseBot:i,name:t,handle:o,prompt:r,promptIsPublic:m,introduction:u,description:v,profilePictureUrl:f,apiUrl:y,apiKey:F,isApiBot:w,hasMarkdownRendering:N,hasSuggestedReplies:B,botIsPublic:L,hasCustomTemperature:C,temperature:V,baseBotId:G,hasCustomMessageLimit:P,customMessageLimit:A,knowledgeSourcesToAdd:R,messagePrice:I,shouldCiteSources:x,allowRelatedBotRecommendations:M,inviteCodeReqHash:K}=n;return new Promise((n,T)=>{let E=y?new URL(y).toString():null;if((null==R?void 0:R.some(e=>!("knowledgeSourceId"in e)&&"pending"===e.uploadPromise.state))&&!confirm(a("Some of your knowledge sources are still uploading. Are you sure you want to create this bot without them?"))){T();return}l({variables:{model:i,displayName:t,handle:o,prompt:r,isPromptPublic:m,introduction:u,description:v,profilePictureUrl:f,apiUrl:E,apiKey:F,isApiBot:w,hasMarkdownRendering:N,hasSuggestedReplies:B,isPrivateBot:void 0!==L&&!L,temperature:C?V:null,baseBotId:G,customMessageLimit:P?A:null,knowledgeSourceIds:null==R?void 0:R.map(e=>"knowledgeSourceId"in e&&e.knowledgeSourceId).filter(b.h),messagePriceCc:I?1e4*I:null,shouldCiteSources:x,allowRelatedBotRecommendations:M,inviteCodeReqHash:K},onCompleted:e=>{let{poeBotCreate:a}=e;a.status===h.success?(0,p.pE)(g)?setTimeout(()=>{(0,S.o)(o,a.statusMessage),n()},750):s.push("/".concat(o)).then(()=>{setTimeout(()=>{d({content:a.statusMessage,type:c.pC.success}),(0,k.nL)(k.wy.BotCreated)},200)}):(d({content:a.statusMessage,type:c.pC.error}),T())},onError:()=>{d({content:a("Create bot failed due to an unexpected error on the Poe server."),type:c.pC.error}),T()},updater:(a,n)=>{var i;(null===(i=n.poeBotCreate.bot)||void 0===i?void 0:i.id)&&((0,_.Fo)(a,n.poeBotCreate.bot.id),n.poeBotCreate.bot.viewerIsFollower&&e&&(0,_.MD)(a,n.poeBotCreate.bot.id))}})})},[l,d,s,a,g,e]);return{isLoading:i,addBot:(0,m.useCallback)(async e=>{let{image:n,...i}=e;try{t(!0);let e=await (0,v.W)(n);await y({...i,profilePictureUrl:e})}catch(e){if(e instanceof Error)throw d({content:e.message,type:c.pC.error}),e;e&&d({content:a("Create bot failed due to an unexpected error on the Poe server."),type:c.pC.error})}finally{t(!1)}},[y,d,a])}};var creation_CreateBotMain=e=>{let{queryRoot:a,defaultToApiTab:i}=e,{t}=(0,r.$G)(),{randomizedAvailableBotHandle:o,viewer:d,message:c}=(0,u.useFragment)(n(44036),a),{addBot:_,isLoading:p}=useAddBot({privateBotsOnProfileGateEnabled:d.privateBotsOnProfileGateEnabled}),k=(0,m.useMemo)(g._,[]);return(0,l.jsxs)(l.Fragment,{children:[p&&(0,l.jsx)(y.LK,{}),(0,l.jsx)(F.Z,{onSubmit:_,viewer:d,prompt:null==c?void 0:c.text,handle:o,submitText:t("Create bot"),allowSwitchingBotType:!0,isApiBot:i,apiKey:k,disclaimer:(0,l.jsxs)(r.cC,{i18nKey:"createBotMainDisclaimer",children:["Creation and use of bots is subject to the"," ",(0,l.jsx)(s(),{href:"/tos",target:"_blank",children:"Poe Terms of Service"}),"."]}),shouldShowEditReminder:d.enableBotEditReminder,bot:null,isSubmitting:p})]})},w=n(81360),N=n(42050),B=n(50515),L=n(59583),C=n(64737);let V=(0,L.T)(e=>{let{t:a}=(0,r.$G)(),n=(0,o.useRouter)();return(0,l.jsxs)(N.Z,{header:(0,l.jsx)(w.Z,{title:a("Create a bot")}),children:[(0,l.jsx)(B.Z,{title:(0,C.p)(a("Create a bot"))}),(0,l.jsx)(creation_CreateBotMain,{queryRoot:e,defaultToApiTab:!!n.query.api||!!n.query.server})]})},{query:n(10621),variables:e=>{let a=e.prompt_message;if(!a||Array.isArray(a))return{messageId:null};let n=parseInt(a);return isNaN(n)?{messageId:null}:{messageId:n}}},{loggedInOnly:!0});var G=V}},function(e){e.O(0,[9692,1664,5675,6835,3974,7536,6793,1592,1529,4108,5190,2034,9774,2888,179],function(){return e(e.s=35614)}),_N_E=e.O()}]);