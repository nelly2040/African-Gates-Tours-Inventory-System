(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2597],{8787:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{d:"M4 13h14.09l-6.79 6.79a.996.996 0 1 0 1.41 1.41l8.5-8.5c.06-.06.09-.13.13-.2.03-.04.06-.08.08-.13a.91.91 0 0 0 .08-.37c0-.03-.01-.05-.01-.07-.01-.1-.02-.21-.06-.31a.955.955 0 0 0-.22-.33L12.72 2.8c-.2-.2-.45-.29-.71-.29-.26 0-.51.1-.71.29a.996.996 0 0 0 0 1.41L18.08 11H4c-.55 0-1 .45-1 1s.45 1 1 1Z"})))}},57758:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{d:"M2.5 8.38c0 .26.1.51.29.71l8.5 8.5c.39.39 1.02.39 1.41 0l8.5-8.5a.996.996 0 1 0-1.41-1.41L12 15.46 4.2 7.67a.996.996 0 0 0-1.41 0c-.19.2-.29.45-.29.71Z"})))}},89846:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm8-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2Zm0 4a1 1 0 0 1 1 1v4h4a1 1 0 1 1 0 2h-4v4a1 1 0 1 1-2 0v-4H7a1 1 0 1 1 0-2h4V7a1 1 0 0 1 1-1Z"})))}},1656:function(e,a,n){"use strict";var t,i=n(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}a.Z=function(e){return i.createElement("svg",_extends({viewBox:"0 0 15 26",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{d:"M7.11 26C3.287 26 .178 22.757.178 18.772V5.312C.179 2.382 2.469 0 5.285 0 6.66 0 7.947.559 8.913 1.573a5.38 5.38 0 0 1 1.478 3.74v11.439c0 1.872-1.472 3.395-3.282 3.395-1.809 0-3.281-1.523-3.281-3.395V8.333a1 1 0 0 1 2 0v8.418c0 .769.575 1.394 1.281 1.394.707 0 1.282-.625 1.282-1.394V5.31c0-.894-.328-1.732-.926-2.36a2.998 2.998 0 0 0-2.18-.952c-1.713 0-3.106 1.485-3.106 3.312v13.46c0 2.882 2.212 5.228 4.93 5.228 2.72 0 4.932-2.346 4.932-5.228V8.333a1 1 0 0 1 2 0v10.439c0 3.985-3.109 7.228-6.932 7.228Z"})))}},51013:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageFileInputButton_viewer",selections:[{alias:"isMultibotEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_multibot_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_web")'}],type:"Viewer"};t.hash="bcc8a3a9fa6469edfb78da5be21580e0",a.default=t},31168:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_messageAttachment",selections:[{kind:"FragmentSpread",name:"FileInfo_attachment"}],type:"MessageAttachment"};t.hash="5c1de64091b0951dc9cce2f9eac236f1",a.default=t},12699:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_viewer",selections:[{kind:"FragmentSpread",name:"FileInfo_viewer"}],type:"Viewer"};t.hash="d9c9bd2d1160ffd2047b73ad589df9bb",a.default=t},74083:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputAttachments_messageAttachments",selections:[{kind:"FragmentSpread",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_messageAttachment"}],type:"MessageAttachment"};t.hash="eeaee6404e1a35d10e11dfb47510ff60",a.default=t},64192:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputAttachments_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_viewer"}],type:"Viewer"};t.hash="cecc4cb7b08e0fc64f11ecf14a181d25",a.default=t},5466:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_bot",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"handle"},{kind:"FragmentSpread",name:"ChatMessageSendButton_bot"},{kind:"FragmentSpread",name:"ChatMessageTextArea_bot"},{kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"},{kind:"FragmentSpread",name:"botHelpers_useViewerHasNoMessagesLeft_bot"},{kind:"FragmentSpread",name:"subscriptionHelpers_useBotLogData_bot"},{kind:"FragmentSpread",name:"useFileUpload_bot"}],type:"Bot"};t.hash="cea111d67e8462649185cfe254052738",a.default=t},60352:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_chat",selections:[{kind:"ScalarField",name:"chatCode"},{kind:"FragmentSpread",name:"ChatMessageInputBotSelector_chat"},{kind:"FragmentSpread",name:"useMultibotAtMention_chat"}],type:"Chat"};t.hash="ebf1fff5cf672bad39ccba4fb0575d29",a.default=t},42785:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputContainer_messageEdges",selections:[{kind:"FragmentSpread",name:"ChatMessageTextArea_messageEdges"}],type:"MessageEdge"};t.hash="3763d1e0a57ccedfde9ee810abab3e3b",a.default=t},50467:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageSendButton_viewer"},{kind:"FragmentSpread",name:"ChatMessageInputAttachments_viewer"},{kind:"FragmentSpread",name:"ChatMessageTextArea_viewer"},{kind:"FragmentSpread",name:"ChatMessageFileInputButton_viewer"},{alias:"isFilePasteEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_file_paste"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_file_paste")'},{alias:"enableInputAreaForNoAccessBots",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_private_deleted_bots_changes_p2"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_private_deleted_bots_changes_p2")'}],type:"Viewer"};t.hash="517fa90294a0bfc5fc64a5eed0324fde",a.default=t},73230:function(e,a,n){"use strict";var t,i,l,s,r,o;n.r(a);let d={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"botId"}],kind:"Fragment",name:"ChatMessageLimitTooltipBotRefetchQuery",selections:[{args:i=[{kind:"Variable",name:"botId",variableName:"botId"}],concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[l={kind:"ScalarField",name:"balanceTooltipText"},s={kind:"ScalarField",name:"numRemainingMessages"},r={kind:"ScalarField",name:"balanceTooltipType"}]}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"ChatMessageLimitTooltipBotRefetchQuery",selections:[{args:i,concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[l,s,r,o={kind:"ScalarField",name:"id"}]},o]}]},params:{id:"75a11bd9f1bf79d7c57e2d6bc2decf7acf0818fd51b19bfaaaa1bd69c78c7713",metadata:{},name:"ChatMessageLimitTooltipBotRefetchQuery",operationKind:"query",text:null}};d.hash="314a0e419e698efc6a45f0db4b881fbf",a.default=d},80946:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageLimitTooltip_bot",selections:[{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{kind:"ScalarField",name:"balanceTooltipText"},{kind:"ScalarField",name:"numRemainingMessages"},{kind:"ScalarField",name:"balanceTooltipType"}]},{kind:"ScalarField",name:"botId"},{kind:"FragmentSpread",name:"subscriptionHelpers_useBotLogData_bot"}],type:"Bot"};t.hash="74836a86dc840fab1a13c57a98d49df9",a.default=t},27738:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageLimitTooltip_viewer",selections:[{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]},{kind:"ScalarField",name:"isEligibleForWebSubscriptions"}],type:"Viewer"};t.hash="73da26ccf4397272bc7e930b734266f2",a.default=t},72612:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageSendButton_bot",selections:[{kind:"FragmentSpread",name:"ChatMessageLimitTooltip_bot"}],type:"Bot"};t.hash="82fbd2e64529b601ae67251cfcd5e239",a.default=t},19117:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageSendButton_viewer",selections:[{kind:"FragmentSpread",name:"ChatMessageLimitTooltip_viewer"}],type:"Viewer"};t.hash="ed14f72231a4384c345c485904951c2a",a.default=t},9883:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageTextArea_bot",selections:[{kind:"FragmentSpread",name:"subscriptionHelpers_useBotLogData_bot"},{kind:"FragmentSpread",name:"botHelpers_useViewerHasNoMessagesLeft_bot"}],type:"Bot"};t.hash="5e5674f17e6353a7dc2608e86d15a879",a.default=t},87330:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"ChatMessageTextArea_getLastHumanMessageText_messageEdge"};t.hash="a01c79c1084fa7fcca797236c2cf1604",a.default=t},73938:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageTextArea_messageEdges",selections:[{kind:"FragmentSpread",name:"ChatMessageTextArea_useOnKeyDown_messageEdges"}],type:"MessageEdge"};t.hash="adef175ef9e8eb0b392205c0b7ec1e41",a.default=t},91963:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageTextArea_useOnKeyDown_messageEdges",selections:[{kind:"InlineDataFragmentSpread",name:"ChatMessageTextArea_getLastHumanMessageText_messageEdge",selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"ScalarField",name:"text"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]}]}],argumentDefinitions:[]}],type:"MessageEdge"};t.hash="326ac8a25d146f97c1aab77fcfc8ef9b",a.default=t},97369:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageTextArea_viewer",selections:[{alias:"isMultibotEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_multibot_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_web")'}],type:"Viewer"};t.hash="a0aa582d2e97f70095f9b9d452bfcc71",a.default=t},38117:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"getChatContentType_chat"};t.hash="2291a2b3c3c16aec13efd467f4adefba",a.default=t},14973:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"resendMessage_bot"};t.hash="dd2b0610e4bd5a8280817ddcdd093f52",a.default=t},17048:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"resendMessage_chat"};t.hash="18d6b5bb8062a445ad9f0eb2fd4f5f1d",a.default=t},71669:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"resendMessage_message"};t.hash="e56e3fa2233e8ab03a48556a6fc0f1ec",a.default=t},53398:function(e,a,n){"use strict";var t,i,l,s,r,o,d,c,u,m,g,p,h,b,k,_,f,F,v,S,C,y,M,w,L,T,I,x,A,E,D,B,N,P,R,V,G,j,U,O,K,Z,H,z,W,q,$,Q,Y,X,J,ee,ea,en,et,ei,el,es,er,eo,ed,ec,eu,em,eg,ep,eh,eb,ek,e_,ef,eF,ev,eS,eC,ey,eM,ew,eL,eT,eI,ex,eA,eE,eD,eB,eN,eP,eR,eV,eG;n.r(a);let ej=(t={defaultValue:null,kind:"LocalArgument",name:"attachments"},i={defaultValue:null,kind:"LocalArgument",name:"bot"},l={defaultValue:null,kind:"LocalArgument",name:"chatId"},s={defaultValue:null,kind:"LocalArgument",name:"clientNonce"},r={defaultValue:null,kind:"LocalArgument",name:"existingMessageAttachmentsIds"},o={defaultValue:null,kind:"LocalArgument",name:"messagePointsDisplayPrice"},d={defaultValue:null,kind:"LocalArgument",name:"query"},c={defaultValue:null,kind:"LocalArgument",name:"sdid"},u={defaultValue:null,kind:"LocalArgument",name:"shouldFetchChat"},m={defaultValue:null,kind:"LocalArgument",name:"source"},g=[{kind:"Variable",name:"attachments",variableName:"attachments"},{kind:"Variable",name:"bot",variableName:"bot"},{kind:"Variable",name:"chatId",variableName:"chatId"},{kind:"Variable",name:"clientNonce",variableName:"clientNonce"},{kind:"Variable",name:"existingMessageAttachmentsIds",variableName:"existingMessageAttachmentsIds"},{kind:"Variable",name:"messagePointsDisplayPrice",variableName:"messagePointsDisplayPrice"},{kind:"Variable",name:"query",variableName:"query"},{kind:"Variable",name:"sdid",variableName:"sdid"},{kind:"Variable",name:"source",variableName:"source"}],h={kind:"ScalarField",name:"messageId"},b={kind:"ScalarField",name:"creationTime"},k={kind:"FragmentSpread",name:"ChatHistoryListItem_message"},_=[p={kind:"ScalarField",name:"id"}],f={kind:"ScalarField",name:"status"},F={kind:"ScalarField",name:"statusMessage"},S={concreteType:"MessageCreateFailedUrl",kind:"LinkedField",name:"failedUrls",plural:!0,selections:[v={kind:"ScalarField",name:"url"},{kind:"ScalarField",name:"reason"}]},C={kind:"ScalarField",name:"chatId"},y={kind:"ScalarField",name:"chatCode"},M={kind:"ScalarField",name:"title"},L={kind:"ScalarField",name:"botId"},T={kind:"ScalarField",name:"hasMarkdownRendering"},I={kind:"InlineDataFragmentSpread",name:"optimisticMessage_createOptimisticBotMessage_bot",selections:[w={kind:"ScalarField",name:"nickname"},{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_bot",selections:[p,{kind:"FragmentSpread",name:"ChatMessage_bot"},{kind:"FragmentSpread",name:"ChatLastMessageArea_bot"},{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],argumentDefinitions:[]}],argumentDefinitions:[]},x={kind:"ScalarField",name:"text"},A={kind:"ScalarField",name:"state"},E={kind:"ScalarField",name:"clientNonce"},D={kind:"ScalarField",name:"author"},B={kind:"ScalarField",name:"contentType"},N={kind:"ScalarField",name:"sourceType"},P={kind:"ScalarField",name:"messageStateText"},Z={concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[p,R={kind:"ScalarField",name:"attachmentId"},V={kind:"ScalarField",name:"name"},v,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[G={kind:"ScalarField",name:"size"},p,j={kind:"ScalarField",name:"mimeType"}]},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isInline"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},v,{kind:"ScalarField",name:"thumbnailUrl"}]},K={kind:"InlineFragment",selections:[O={kind:"ClientExtension",selections:[U={kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageAttachment"}],type:"Attachment",abstractKey:"__isAttachment"},O]},el={concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[H={kind:"ScalarField",name:"messageTimeoutSecs"},L,z={kind:"ScalarField",name:"allowsImageAttachments"},W={kind:"ScalarField",name:"isApiBot"},q={kind:"ScalarField",name:"limitedAccessType"},$={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},Q={kind:"ScalarField",name:"translatedBotTags"},Y={kind:"ScalarField",name:"deletionState"},X={kind:"ScalarField",name:"displayName"},ea={kind:"LinkedField",name:"picture",plural:!1,selections:ee=[J={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[v],type:"URLBotImage"}]},en={kind:"ScalarField",name:"handle"},et={kind:"ScalarField",name:"canUserAccessBot"},w,p,ei={kind:"TypeDiscriminator",abstractKey:"__isNode"}]},er={concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[es={kind:"ScalarField",name:"commandType"}]},eo={kind:"ScalarField",name:"vote"},ed={kind:"ScalarField",name:"hasCitations"},ec={kind:"ScalarField",name:"textLengthOnCancellation"},em={kind:"ClientExtension",selections:[U,eu={kind:"ScalarField",name:"timeoutLevel"},{kind:"ScalarField",name:"errorMessage"}]},eg={kind:"ScalarField",name:"cursor"},ep={kind:"ScalarField",name:"introduction"},ek={concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[eh={kind:"ScalarField",name:"numRemainingMessages"},{kind:"ScalarField",name:"shouldShowReminderBanner"},p,eb={kind:"ScalarField",name:"displayMessagePointPrice"},{kind:"ScalarField",name:"remainingMessagesLimitReason"},{kind:"ScalarField",name:"balanceTooltipText"},{kind:"ScalarField",name:"balanceTooltipType"}]},e_={kind:"ScalarField",name:"isCreatedByPoeUserAccount"},ef={kind:"ScalarField",name:"isPrivateBot"},eF={kind:"ScalarField",name:"mayHaveSuggestedReplies"},ev={kind:"ScalarField",name:"supportsResend"},eS={kind:"ScalarField",name:"supportsRemix"},eC={concreteType:"Bot",kind:"LinkedField",name:"animateToVideoBot",plural:!1,selections:[L,p,en]},ey={kind:"ScalarField",name:"shouldConfirmBeforeAddingAsMember"},eM={kind:"ScalarField",name:"isServerBot"},ew={kind:"ScalarField",name:"uploadFileSizeLimit"},eL={kind:"ScalarField",name:"supportsFileUpload"},eT=[{kind:"Literal",name:"size",value:"small"}],eI={kind:"ScalarField",name:"isDeleted"},ex={alias:"titleText",kind:"ScalarField",name:"title"},eA={alias:"bodyText",kind:"ScalarField",name:"body"},eE={concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[j,p,G]},eB={kind:"LinkedField",name:"primaryImageSources",plural:!0,selections:eD=[J,{kind:"TypeDiscriminator",abstractKey:"__isMessageFollowupActionImageSource"},{kind:"InlineFragment",selections:[p,V,v],type:"MessageAttachment"},{kind:"InlineFragment",selections:[p,en,Y,X,ea],type:"Bot"},{kind:"InlineFragment",selections:_,type:"Node",abstractKey:"__isNode"}]},eN={kind:"LinkedField",name:"secondaryImageSources",plural:!0,selections:eD},eP={kind:"ScalarField",name:"isInChat"},eR=[L,p],{fragment:{argumentDefinitions:[t,i,l,s,r,o,d,c,u,m],kind:"Fragment",name:"sendMessageMutation",selections:[{args:g,concreteType:"MessageEdgeCreate",kind:"LinkedField",name:"messageEdgeCreate",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:[p,{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[h,b,{kind:"InlineDataFragmentSpread",name:"messagesConnection_message",selections:[p,{kind:"FragmentSpread",name:"ChatMessagesView_useMessagePairs_messages"},k],argumentDefinitions:[]},k,{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_newChatUpdater_message",selections:_,argumentDefinitions:[]}]}]},{kind:"FragmentSpread",name:"sendMessageMutation_messageEdge"}]},f,F,S,{concreteType:"MessageEdge",kind:"LinkedField",name:"botMessage",plural:!1,selections:[p,{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[h]}]},{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[p,C,y,M,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[p,w,L]},{kind:"InlineDataFragmentSpread",name:"sendMessage_newChatUpdater_chat",selections:[p,C,y,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[T]}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatHistoryListItem_chat"},{kind:"FragmentSpread",name:"ChatPageColumn_chat"}]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatPageColumn_viewer"}]}]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_newChatUpdater_bot",selections:[I],argumentDefinitions:[]}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_bot",selections:[L,I],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"setBotDetailsSidebar_bot",selections:[{kind:"FragmentSpread",name:"ChatBotDetailsSidebar_bot"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatMessageLimitTooltip_bot"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[l,i,d,m,s,c,t,r,u,o],kind:"Operation",name:"sendMessageMutation",selections:[{args:g,concreteType:"MessageEdgeCreate",kind:"LinkedField",name:"messageEdgeCreate",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:[p,{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[h,b,p,x,A,E,D,B,N,P,Z,el,er,eo,ed,ec,em,ei]},eg]},f,F,S,{concreteType:"MessageEdge",kind:"LinkedField",name:"botMessage",plural:!1,selections:[p,{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[h,p]}]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[L,w,p,H,z,W,q,$,Q,Y,X,ea,en,et,ep,ek,e_,ef,eF,ev,eS,eC,ey,eM,ew,eL,{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[ei]},ei]},{condition:"shouldFetchChat",kind:"Condition",passingValue:!0,selections:[{concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[p,C,y,M,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[p,w,L,T,X,Y,ea,{alias:"smallPicture",args:eT,kind:"LinkedField",name:"picture",plural:!1,selections:ee,storageKey:'picture(size:"small")'},{kind:"ScalarField",name:"viewerIsCreator"},e_,ef,{kind:"ScalarField",name:"viewerIsFollower"},{kind:"ScalarField",name:"followerCount"},{kind:"ScalarField",name:"shareLink"},en,et,{kind:"ScalarField",name:"isDown"},{kind:"ScalarField",name:"model"},ew,z,ek,{kind:"ScalarField",name:"noAccessMessage"},{kind:"ScalarField",name:"allowsClearContext"},{kind:"ScalarField",name:"conversationStarters"},{kind:"ScalarField",name:"isOfficialBot"},{kind:"ScalarField",name:"monthlyActiveUsers"},{concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[eI,{args:eT,kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},{kind:"ScalarField",name:"fullName"},{alias:"nullableHandle",kind:"ScalarField",name:"handle"},p,ei]},{kind:"ScalarField",name:"description"},Q,{kind:"ScalarField",name:"poweredBy"},{kind:"ScalarField",name:"promptPlaintext"},{kind:"ScalarField",name:"shouldHide"},ep,H,W,q,$,eF,ev,eS,eC,ey,eM,eL,{kind:"ScalarField",name:"isTrustedBot"},ei]},{kind:"ScalarField",name:"lastInteractionTime"},{kind:"ScalarField",name:"botMembersCount"},{concreteType:"Message",kind:"LinkedField",name:"lastNonChatBreakMessage",plural:!1,selections:[x,p]},eI,{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[x,A,{kind:"ScalarField",name:"attachmentTruncationState"},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[ep,L,ek,p,e_,w,X,ef,eF,ev,eS,eC,Y,W,H,z,q,$,Q,ea,en,et,ey,eM,ew,eL,ei]},D,p,ec,eo,h,B,E,{kind:"LinkedField",name:"followupActions",plural:!0,selections:[J,{kind:"TypeDiscriminator",abstractKey:"__isMessageFollowupActionBase"},M,{kind:"InlineFragment",selections:[ex,eA,{kind:"ScalarField",name:"sendText"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"sendAttachments",plural:!0,selections:[R,p,{kind:"InlineFragment",selections:[eE,V,v,K],type:"Attachment",abstractKey:"__isAttachment"}]},eB,eN,{concreteType:"MessageFollowUpTargetBotInfo",kind:"LinkedField",name:"targetBotInfo",plural:!1,selections:[eP,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[p,{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[eb,p,eh]},L,w,X,en,ey]}]},{concreteType:"SendMessageFollowupActionMessageSource",kind:"LinkedField",name:"messageSource",plural:!1,selections:[N,{kind:"ScalarField",name:"metadata"}]}],type:"SendMessageFollowupAction"},{kind:"InlineFragment",selections:[ex,eA,{kind:"ScalarField",name:"prefillText"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"prefillAttachments",plural:!0,selections:[R,p,v,V,{kind:"InlineFragment",selections:[eE,K],type:"Attachment",abstractKey:"__isAttachment"}]},eB,eN],type:"PrefillMessageFollowupAction"},{kind:"InlineFragment",selections:[ex,eA,eB,es,{concreteType:"MessageFollowUpTargetBotInfo",kind:"LinkedField",name:"targetBotInfo",plural:!1,selections:[eP,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[L,w,X,{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[eh,p]},p,en,ey]}]}],type:"CommandMessageFollowupAction"}]},{kind:"ScalarField",name:"suggestedReplies"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[V,v,p,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[j,p]},R,{kind:"InlineFragment",selections:[{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[G]},K],type:"Attachment",abstractKey:"__isAttachment"}]},{concreteType:"Bot",kind:"LinkedField",name:"recommendedBots",plural:!0,selections:eR},{kind:"ClientExtension",selections:[U,eu]}]},{args:eV=[{kind:"Literal",name:"last",value:5}],concreteType:"MessagesConnection",kind:"LinkedField",name:"messagesConnection",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[D,p,h,b,x,A,E,B,N,P,Z,el,er,eo,ed,ec,J,em,ei]},p,eg]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"hasPreviousPage"},{kind:"ScalarField",name:"startCursor"}]},p],storageKey:"messagesConnection(last:5)"},{args:eV,handle:"connection",key:"ChatMessagesView_chat_messagesConnection",kind:"LinkedHandle",name:"messagesConnection"},{kind:"ScalarField",name:"isContextOptimizationOn"},{kind:"ScalarField",name:"membersIncludeUntrustedBot"},ei,O]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"enableCodePreview",args:[{kind:"Literal",name:"gateName",value:"poe_web_codeblock_preview"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_codeblock_preview")'},{alias:"enableImageViewer",args:[{kind:"Literal",name:"gateName",value:"poe_web_image_viewer"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_image_viewer")'},{alias:"enableMath",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_markdown_math"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_markdown_math")'},{kind:"ScalarField",name:"promptBotImageDomainWhitelist"},{kind:"ScalarField",name:"uid"},{alias:"poeMessageDropdownImageOptions",args:[{kind:"Literal",name:"gateName",value:"poe_message_dropdown_image_options"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_message_dropdown_image_options")'},{alias:"showMessageInfo",args:[{kind:"Literal",name:"gateName",value:"poe_show_message_cost"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_show_message_cost")'},{alias:"enableImageAttachmentsForBots",args:[{kind:"Literal",name:"gateName",value:"poe_enable_image_attachments_for_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_image_attachments_for_bots")'},{alias:"enableVideoAttachmentsForBots",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_video_player"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_video_player")'},{alias:"enableAudioAttachmentsForBots",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_audio_player"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_audio_player")'},{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[p,b]},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"},p,{kind:"ScalarField",name:"expiresTime"},{kind:"ScalarField",name:"willCancelAtPeriodEnd"},{kind:"ScalarField",name:"purchaseRevocationReason"},{kind:"ScalarField",name:"planType"}]},{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"},{kind:"ScalarField",name:"shouldSeeAndroidSubscriptionAnnouncement"},{kind:"ScalarField",name:"shouldSeeResponseSpeedUpsell"},{alias:"subscribeEnhancedConversionProperties",args:[{kind:"Literal",name:"poePaidAcqEvent",value:"Subscribe"}],kind:"ScalarField",name:"googleTagManagerEnhancedConversionProperties",storageKey:'googleTagManagerEnhancedConversionProperties(poePaidAcqEvent:"Subscribe")'},{alias:"monthlySubscribeEnhancedConversionProperties",args:[{kind:"Literal",name:"poePaidAcqEvent",value:"MonthlySubscribe"}],kind:"ScalarField",name:"googleTagManagerEnhancedConversionProperties",storageKey:'googleTagManagerEnhancedConversionProperties(poePaidAcqEvent:"MonthlySubscribe")'},{alias:"yearlySubscribeEnhancedConversionProperties",args:[{kind:"Literal",name:"poePaidAcqEvent",value:"YearlySubscribe"}],kind:"ScalarField",name:"googleTagManagerEnhancedConversionProperties",storageKey:'googleTagManagerEnhancedConversionProperties(poePaidAcqEvent:"YearlySubscribe")'},{alias:"enableGTMEventSending",args:[{kind:"Literal",name:"gateName",value:"poe_enable_event_sending_through_google_tag_manager"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_event_sending_through_google_tag_manager")'},{alias:"isPrivateDeletedBotsChangesEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_private_deleted_bots_changes"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_private_deleted_bots_changes")'},{alias:"useNewFollowupActions",args:[{kind:"Literal",name:"gateName",value:"poe_use_new_message_followup_actions_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_new_message_followup_actions_web")'},{alias:"enableRemixButton",args:[{kind:"Literal",name:"gateName",value:"poe_remix_button_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_remix_button_web")'},{alias:"enableCompareFollowup",args:[{kind:"Literal",name:"gateName",value:"poe_enable_compare_followup_action"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_compare_followup_action")'},{alias:"enableOnlyAnimateFollowupAction",args:[{kind:"Literal",name:"gateName",value:"poe_enable_only_animate_followup_action"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_only_animate_followup_action")'},{kind:"ScalarField",name:"isEligibleToPurchaseOnAnyPlatform"},{kind:"ScalarField",name:"viewerCountryCode"},{concreteType:"MessagePointInfo",kind:"LinkedField",name:"messagePointInfo",plural:!1,selections:[{kind:"ScalarField",name:"messagePointResetTime"},{kind:"ScalarField",name:"subscriberBonusGrantResetTime"},p]},{alias:"enableAttachmentTruncationToast",args:[{kind:"Literal",name:"gateName",value:"poe_enable_attachment_truncation_toast"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_attachment_truncation_toast")'},{alias:"showChatBreakMoreOptionsMenu",args:[{kind:"Literal",name:"gateName",value:"poe_web_more_discoverable_context_clear_delete"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_more_discoverable_context_clear_delete")'},{alias:"decoupleBotHandleAndName",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_bot_handle_display_name_decoupling"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_bot_handle_display_name_decoupling")'},p,{alias:"enableBotInfoCardOverflowMenuChanges",args:[{kind:"Literal",name:"gateName",value:"poe_enable_bot_info_card_action_bar_changes"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_bot_info_card_action_bar_changes")'},{concreteType:"Bot",kind:"LinkedField",name:"defaultBot",plural:!1,selections:eR},{alias:"enableInputAreaForNoAccessBots",args:eG=[{kind:"Literal",name:"gateName",value:"poe_web_enable_private_deleted_bots_changes_p2"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_private_deleted_bots_changes_p2")'},{alias:"isMultibotEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_multibot_web"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_multibot_web")'},{alias:"isFilePasteEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_file_paste"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_file_paste")'},{alias:"enableEncourageAtMention",args:[{kind:"Literal",name:"gateName",value:"poe_web_input_field_encourage_at_mention"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_input_field_encourage_at_mention")'},{alias:"showNewChatButton",args:[{kind:"Literal",name:"gateName",value:"poe_web_more_discoverable_create_new_chat_button"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_more_discoverable_create_new_chat_button")'},{alias:"enableNewChatButtonForNoAccessBots",args:eG,kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_private_deleted_bots_changes_p2")'},{alias:"enablePayByContext",args:[{kind:"Literal",name:"gateName",value:"poe_enable_pay_by_context"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_pay_by_context")'}]}]}]}]},params:{id:"de6f59d5f34ff8cb6c7b827a0505dafa5192cdf73f1e0f5a3e9e9e05aaa9e30d",metadata:{},name:"sendMessageMutation",operationKind:"mutation",text:null}});ej.hash="808745187d0a9a5253bd7be02763f1a3",a.default=ej},88530:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_bot"};t.hash="03d2ef9817ced391e4447fc3a36e2dc3",a.default=t},92750:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_chat"};t.hash="41e13c12a815d056441458d26ccd44e2",a.default=t},39574:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_messageAttachment"};t.hash="3516a5654ecab43280472adcd8637c86",a.default=t},7741:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_newChatUpdater_bot"};t.hash="1b13c18488f888b9a8e194c764eb6af8",a.default=t},87065:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_newChatUpdater_chat"};t.hash="fe289b3648e440d6462f634cd9902a26",a.default=t},13182:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_newChatUpdater_message"};t.hash="a3edfe280a68f7340ebe0be36940756a",a.default=t},4690:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_onMessageSendChatUpdate_chat"};t.hash="3f09cda2a6e7d19e423600d1197a875f",a.default=t},19984:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_onMessageSendChatUpdate_messageAttachment"};t.hash="8bcdc0fdf98f584608cee7a0839e5efd",a.default=t},60706:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_onSuccessUpdater_bot"};t.hash="ee4aaef889ad9dfcd7386da3d64786c3",a.default=t},97048:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"sendMessage_onSuccessUpdater_chat"};t.hash="692e43449c9d5e620c724dfe96e44e61",a.default=t},35813:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useFileUpload_bot",selections:[{kind:"ScalarField",name:"uploadFileSizeLimit"}],type:"Bot"};t.hash="9411ba544b4a8708972edb3b3b4991d0",a.default=t},15313:function(e,a,n){"use strict";var t,i,l,s,r,o,d,c,u,m,g,p,h;n.r(a);let b=(t={defaultValue:null,kind:"LocalArgument",name:"chatCode"},i={defaultValue:null,kind:"LocalArgument",name:"handle"},l={defaultValue:null,kind:"LocalArgument",name:"hasChat"},s=[{kind:"Variable",name:"name",variableName:"handle"}],r={kind:"ScalarField",name:"canUserAccessBot"},o={kind:"ScalarField",name:"handle"},c={condition:"hasChat",kind:"Condition",passingValue:!0,selections:[{args:[d={kind:"Variable",name:"chatCode",variableName:"chatCode"}],kind:"ScalarField",name:"isInChat"}]},u=[d,{kind:"Variable",name:"hasChat",variableName:"hasChat"}],m=[t,l],{fragment:{argumentDefinitions:[t,i,l],kind:"Fragment",name:"useMultibotAtMentionSelectBotQuery",selections:[{args:s,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[r,{kind:"InlineDataFragmentSpread",name:"useMultibotAtMention_selectBot",selections:[o,{kind:"InlineDataFragmentSpread",name:"ChatMessageInputFooter_selectBot",selections:[o,c,{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],args:u,argumentDefinitions:m},{kind:"InlineDataFragmentSpread",name:"ChatHomeMain_selectBot",selections:[g={kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"ChatSubscriptionPaywallContextWrapper_bot"},{kind:"FragmentSpread",name:"ChatHomeMainInputContainer_bot"},{kind:"InlineDataFragmentSpread",name:"useHomeBotSelector_selectBot",selections:[g,{kind:"FragmentSpread",name:"BotSelectorHomeMain_bots"}],argumentDefinitions:[]}],argumentDefinitions:[]}],args:u,argumentDefinitions:m}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:[i,t,l],kind:"Operation",name:"useMultibotAtMentionSelectBotQuery",selections:[{args:s,concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[r,o,{kind:"ScalarField",name:"supportsRemix"},{kind:"ScalarField",name:"shouldConfirmBeforeAddingAsMember"},g,{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{concreteType:"MessagePointLimit",kind:"LinkedField",name:"messagePointLimit",plural:!1,selections:[{kind:"ScalarField",name:"balanceTooltipText"},{kind:"ScalarField",name:"numRemainingMessages"},{kind:"ScalarField",name:"balanceTooltipType"},g,{kind:"ScalarField",name:"displayMessagePointPrice"},{kind:"ScalarField",name:"shouldShowReminderBanner"},{kind:"ScalarField",name:"remainingMessagesLimitReason"}]},p={kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},{kind:"LinkedField",name:"picture",plural:!1,selections:h=[{kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{kind:"ScalarField",name:"isPrivateBot"},{kind:"ScalarField",name:"mayHaveSuggestedReplies"},{kind:"ScalarField",name:"supportsResend"},{concreteType:"Bot",kind:"LinkedField",name:"animateToVideoBot",plural:!1,selections:[p,g,o]},{alias:"tinyPicture",args:[{kind:"Literal",name:"size",value:"tiny"}],kind:"LinkedField",name:"picture",plural:!1,selections:h,storageKey:'picture(size:"tiny")'},c,{kind:"TypeDiscriminator",abstractKey:"__isNode"}]}]},params:{id:"999c06754646b07646e120cddf392a531c544045dcf881b4810985ae526d419b",metadata:{},name:"useMultibotAtMentionSelectBotQuery",operationKind:"query",text:null}});b.hash="d598aaa2e4ffeb0d25b4ad7018b4b1aa",a.default=b},70275:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useMultibotAtMention_chat",selections:[{kind:"ScalarField",name:"chatCode"}],type:"Chat"};t.hash="87c684b4cdea96c44e6ac6ae00edd137",a.default=t},66348:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useMultibotAtMention_selectBot"};t.hash="f5d5b41d8c2bd79b557d23c20debac76",a.default=t},77172:function(e,a,n){"use strict";var t=n(85893),i=n(67294),l=n(22120),s=n(42240),r=n(87841),o=n.n(r);a.Z=e=>{let{fileHandlerRef:a}=e,n=(0,i.useRef)(null),r=(0,i.useCallback)(e=>{var n;if(!a.current)return;let t=Array.from((null===(n=e.dataTransfer)||void 0===n?void 0:n.files)||[]);t.length&&a.current.handleFiles(t)},[a]),{isDropTargetDraggingOver:d,isDocumentDraggingOver:c}=(0,s.Y)(n,r),{t:u}=(0,l.$G)();return(0,t.jsx)("div",{ref:n,className:o().dropTarget,"data-visible":c,"data-active":d,children:u("Drop files here")})}},50723:function(e,a,n){"use strict";n.d(a,{Z:function(){return ey}});var t,i,l,s,r,o=n(85893),d=n(5152),c=n.n(d),u=n(67294),m=n(22578),g=n(49169),p=n(2012),h=n(41019),b=n(81534),k=n(37650),_=n(8655),f=n(47986),F=n(38154),v=n.n(F),S=n(77614),C=n(22120),y=n(69295),M=n(25533),w=n(89846),L=n(1656),T=n(70442),I=n.n(T),x=n(81952),A=n.n(x);let E=(0,u.forwardRef)((e,a)=>{let[n,t]=(0,u.useState)(null),[i,l]=(0,u.useState)(0),s=(0,u.useRef)(null);return(0,u.useImperativeHandle)(a,()=>({setTooltip:e=>{t(e),l(e=>e+1),null!==s.current&&clearTimeout(s.current),s.current=window.setTimeout(()=>{t(null)},5e3)}}),[]),n?(0,o.jsx)("div",{className:A().tooltip,children:n},i):null});E.displayName="Tooltip";let D=(0,u.forwardRef)((e,a)=>{let{viewer:t,onFileUpload:i,...l}=e,{isMultibotEnabled:s}=(0,m.useFragment)(n(51013),t),r=(0,u.useRef)(null),{t:d}=(0,C.$G)(),c=(0,u.useCallback)(()=>{var e;null==r||null===(e=r.current)||void 0===e||e.click()},[]),g=(0,u.useCallback)(e=>{if(e.target.files){let a=Array.from(e.target.files);e.target.value="",i(a)}},[i]),p=(0,u.useRef)(null);(0,u.useImperativeHandle)(a,()=>({setTooltip:e=>{var a;return null===(a=p.current)||void 0===a?void 0:a.setTooltip(e)}}));let[h,b]=(0,u.useState)(null),k=d("Select attachment");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(y.t9,{className:I().button,onClick:c,ref:b,...l,children:s?(0,o.jsx)(w.Z,{}):(0,o.jsx)(L.Z,{})}),(0,o.jsx)(E,{ref:p}),(0,o.jsx)(M.Z,{anchorRef:h,label:k,placement:"top"})]}),(0,o.jsx)("input",{className:I().input,ref:r,type:"file",multiple:!0,onChange:g})]})});D.displayName="ChatMessageFileInputButton";var B=n(39620),N=n(34616),P=n(25432),R=n.n(P),patterns_Dismissable=e=>{let{children:a,onDismiss:n,className:t}=e,i=(0,u.useCallback)(e=>{e.stopPropagation(),n()},[n]);return(0,o.jsxs)("div",{className:(0,N.$)(R().dismissableContainer,t),children:[a,(0,o.jsx)("button",{className:R().dismissButton,onClick:i,children:(0,o.jsx)(B.Z,{className:R().icon})})]})},V=n(32260),G=n(89942),j=n(30498),U=n(47180),O=n.n(U);let ChatMessageInputAttachment=e=>{let{file:a,viewer:t,index:i,onDismiss:l}=e,s=(0,u.useCallback)(()=>{l(i)},[l,i]),r=(0,m.useFragment)(n(12699),t),d=(0,j.J$)(n(31168),a);return(0,o.jsx)(patterns_Dismissable,{className:O().attachment,onDismiss:s,children:(0,o.jsx)(V.Z,{file:d,viewer:r})})};var inputFooter_ChatMessageInputAttachments=e=>{let{files:a,viewer:t,onFileRemoved:i}=e,l=(0,u.useCallback)(e=>{i(e)},[i]),s=(0,m.useFragment)(n(64192),t),r=(0,j.mj)(n(74083),a),d=function(){let e=(0,u.useRef)(0),a=(0,u.useRef)(new WeakMap),n=(0,u.useCallback)(n=>(a.current.has(n)||a.current.set(n,e.current++),a.current.get(n)),[]);return n}();return a.length?(0,o.jsx)(G.Z,{className:O().container,children:r.map((e,a)=>(0,o.jsx)(ChatMessageInputAttachment,{file:e,viewer:s,index:a,onDismiss:l},d(e)))}):null},K=n(44311),Z=n(8787),H=n(92002),z=n.n(H),W=n(26897),q=n(57758),$=n(67275),Q=n(79500),Y=n(68702),X=n.n(Y);(t=l||(l={})).base="base",t.warning="warning";var J=l,ee=n(44720),inputFooter_ChatMessageLimitTooltip=e=>{let{bot:a,viewer:t}=e,i=(0,m.useFragment)(n(80946),a),{subscription:l,isEligibleForWebSubscriptions:s}=(0,m.useFragment)(n(27738),t),{messagePointLimit:r,botId:d}=i,{setBotId:c}=(0,u.useContext)(W.J),{isLoggedInUser:h}=(0,p.b)(),k=(0,m.useRelayEnvironment)(),_=(0,u.useRef)(null),f=(0,u.useCallback)(()=>{h&&null==_.current&&(_.current=d,(0,m.fetchQuery)(k,n(73230),{botId:d},{fetchPolicy:"network-only"}).subscribe({complete:()=>{_.current=null},error:()=>{_.current=null}}))},[d,k,h,_]);(0,$.zw)(f);let F=h?r.balanceTooltipText:null,v=!!F,{openPaywall:C}=(0,g.rk)(),M=S.Z.pill_tooltip,{logImpression:w,logClick:L,getViewableImpressionData:T}=(0,b.hz)(i),{ref:I}=(0,Q.Z)(ee.Z.web_subscriptions,{additionalLogData:T(M)}),x=h&&0===r.numRemainingMessages&&!(null==l?void 0:l.isActive)&&s;(0,u.useEffect)(()=>{v&&x&&w(M)},[v,x,w,M]);let A=(0,u.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),x?(L(M),C()):c(d)},[C,L,M,d,x,c]),E=r.balanceTooltipType==J.warning?X().tooltipNotMuted:X().tooltipMuted;return v?(0,o.jsxs)(y.t9,{className:(0,N.$)(X().noFreeMessageTooltip,E,h?X().tooltipClickable:X().tooltipNonClickable),onClick:A,ref:x?I:void 0,children:[F,h&&(0,o.jsx)(q.Z,{className:X().chevronIcon})]}):null},inputFooter_ChatMessageSendButton=e=>{let{bot:a,viewer:t,className:i,...l}=e,{t:s}=(0,C.$G)(),r=(0,m.useFragment)(n(72612),a),d=(0,m.useFragment)(n(19117),t),[c,g]=(0,u.useState)(null),p=s("Send message");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.DF,{ref:g,className:(0,N.$)(z().sendButton,i),...l,children:(0,o.jsx)(Z.Z,{})}),(0,o.jsx)(M.Z,{anchorRef:c,label:p,placement:"top"}),(0,o.jsx)(inputFooter_ChatMessageLimitTooltip,{bot:r,viewer:d})]})},ea=n(74929),en=n(37115),et=n(71953),ei=n.n(et);let useValueChangeListeners=e=>{let a=(0,u.useRef)([]),n=(0,u.useCallback)(e=>{a.current.forEach(a=>a(e))},[]),t=(0,u.useCallback)(e=>{n(e.target.value)},[n]),i=(0,u.useCallback)(n=>{if(a.current.push(n),1===a.current.length){var i;null===(i=e.current)||void 0===i||i.addEventListener("input",t)}},[e,t]),l=(0,u.useCallback)(n=>{if(a.current=a.current.filter(e=>e!==n),0===a.current.length){var i;null===(i=e.current)||void 0===i||i.removeEventListener("input",t)}},[e,t]);return(0,u.useEffect)(()=>()=>{var a;null===(a=e.current)||void 0===a||a.removeEventListener("input",t)},[e,t]),{addValueChangedListener:i,removeValueChangedListener:l,onValueChange:n}},usePlaceholderOverflow=(e,a)=>{let n=(0,u.useRef)(null),t=(0,u.useRef)(null),i=(0,u.useRef)([]),l=(0,u.useCallback)(e=>{i.current.forEach(a=>a(e))},[]),s=(0,u.useCallback)(e=>{i.current.push(e)},[]),r=(0,u.useCallback)(e=>{i.current=i.current.filter(a=>a!==e)},[]);(0,u.useEffect)(()=>{if(!a.current||!e.current)return;let i=new ResizeObserver(e=>{n.current=null==e?void 0:e[0].borderBoxSize[0].inlineSize,l(e)}),s=new ResizeObserver(e=>{var a;t.current=null==e?void 0:null===(a=e[0].contentBoxSize)||void 0===a?void 0:a[0].inlineSize,l(e)});return i.observe(e.current),s.observe(a.current),()=>{i.disconnect(),s.disconnect()}},[e,a,l]);let o=(0,u.useCallback)(e=>null!==t.current&&null!==n.current&&!!a.current&&(a.current.textContent=e,t.current>n.current),[a]);return{addPlaceholderResizeListener:s,removePlaceholderResizeListener:r,getPlaceholderOverflow:o}},el=(0,u.forwardRef)((e,a)=>{let{className:n,onInput:t,onChange:i,footer:l,placeholder:s,...r}=e,d=(0,u.useRef)(null),c=(0,u.useRef)(null),m=(0,u.useRef)(null),g=(0,ea.G6)((0,en.F)()),p=(0,u.useCallback)(()=>{if(d.current&&c.current){var e;d.current.dataset.replicatedValue=c.current.value,g&&((e=c.current).scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&requestAnimationFrame(()=>{d.current&&(d.current.style.transform="translateY(0)",d.current.style.transform="unset")})}},[g]),h=(0,u.useCallback)(e=>{null==t||t(e),p()},[t,p]),{addValueChangedListener:b,removeValueChangedListener:k,onValueChange:_}=useValueChangeListeners(c),{getPlaceholderOverflow:f,addPlaceholderResizeListener:F,removePlaceholderResizeListener:v}=usePlaceholderOverflow(c,m);return(0,u.useImperativeHandle)(a,()=>({focus:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus()},blur:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.blur()},addEventListener:(e,a,n)=>{var t;return null===(t=c.current)||void 0===t?void 0:t.addEventListener(e,a,n)},removeEventListener:(e,a,n)=>{var t;return null===(t=c.current)||void 0===t?void 0:t.removeEventListener(e,a,n)},getValue:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.value},setValue:(e,a)=>{if(!c.current)return;let n=c.current.selectionStart,t=c.current.selectionEnd;c.current.value=e,c.current.scrollTo(0,c.current.scrollHeight),p(),a&&c.current.setSelectionRange(...a(n,t)),_(e)},addValueChangedListener:b,removeValueChangedListener:k,getSelectionStart:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.selectionStart},getSelectionEnd:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.selectionEnd},setSelectionRange:(e,a,n)=>{var t;return null===(t=c.current)||void 0===t?void 0:t.setSelectionRange(e,a,null!=n?n:"none")},getPlaceholderOverflow:f,addPlaceholderResizeListener:F,removePlaceholderResizeListener:v}),[p,b,k,_,f,F,v]),(0,o.jsxs)("div",{className:(0,N.$)(ei().growWrap,n),ref:d,children:[(0,o.jsx)("textarea",{className:ei().textArea,ref:c,rows:1,onInput:h,onChange:i,placeholder:s,...r}),(0,o.jsx)("div",{className:ei().hidden,ref:m}),l]})});el.displayName="GrowingTextArea";var es=n(52667);(i=s||(s={}))[i.BACKSPACE=8]="BACKSPACE",i[i.TAB=9]="TAB",i[i.ENTER=13]="ENTER",i[i.SPACE=32]="SPACE",i[i.ESC=27]="ESC",i[i.UP=38]="UP",i[i.DOWN=40]="DOWN",i[i.PAGE_UP=33]="PAGE_UP",i[i.PAGE_DOWN=34]="PAGE_DOWN",i[i.HOME=36]="HOME",i[i.END=35]="END";var er=s;let getLastHumanMessageText=e=>{if(!e)return null;for(let a=e.length-1;a>=0;a--){let{node:t}=(0,m.readInlineData)(n(87330),e[a]);if((0,es.Q1)(t))return t.text}return null},useOnKeyDown=(e,a,t,i,l,s)=>{let r=(0,m.useFragment)(n(91963),e),{shouldPromptSubscription:o,openPaywall:d}=(0,g.rk)(),c=(0,u.useCallback)(e=>{e.preventDefault(),!s&&o?(l(S.Z.limited_access_bot),d()):t()},[s,o,l,d,t]),p=(0,u.useCallback)(e=>{var n,t;if(!(null===(n=a.current)||void 0===n?void 0:n.getValue())){e.preventDefault();let n=getLastHumanMessageText(r);n&&(null===(t=a.current)||void 0===t||t.setValue(n),i())}},[r,a,i]);return(0,u.useCallback)(e=>{e.shiftKey||e.keyCode!=er.ENTER?e.keyCode==er.UP&&p(e):c(e)},[c,p])},eo=(0,u.forwardRef)((e,a)=>{let{edges:t,bot:i,className:l,submitMessage:s,onChange:r,disabled:d,footer:c,placeholderText:p,viewer:h,onPaste:k}=e,f=(0,m.useFragment)(n(97369),h),F=(0,m.useFragment)(n(73938),t),v=(0,m.useFragment)(n(9883),i),C=(0,u.useRef)(null),{logClick:y}=(0,b.hz)(v),M=useOnKeyDown(F,C,s,r,y,f.isMultibotEnabled),{shouldPromptSubscription:w,openPaywall:L}=(0,g.rk)(),T=(0,u.useCallback)(()=>{var e;null===(e=C.current)||void 0===e||e.setValue(""),y(S.Z.limited_access_bot),L()},[y,L]),I=(0,u.useMemo)(()=>(0,_.Z)([C,a]),[C,a]),x=(0,u.useCallback)(()=>{!f.isMultibotEnabled&&w&&T()},[T,w,f.isMultibotEnabled]),A=(0,u.useRef)(!1),E=!f.isMultibotEnabled&&w?()=>{A.current||(T(),A.current=!0)}:void 0;return(0,o.jsx)(el,{ref:I,className:l,placeholder:p,onFocus:E,onInput:x,onChange:r,onKeyDown:M,onPaste:k,disabled:d,footer:c})});eo.displayName="ChatMessageTextArea";var ed=n(41143),ec=n.n(ed),eu=n(63236);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}var microphone=function(e){return u.createElement("svg",_extends({viewBox:"0 0 16 27",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=u.createElement("path",{clipRule:"evenodd",d:"M4.235 1.803C4.848.823 6.013 0 8 0c1.986 0 3.152.824 3.765 1.803a3.826 3.826 0 0 1 .568 1.836V3.664s0 .003-1 .003h1v10.666h-1 1v.028a1.823 1.823 0 0 1-.01.176 3.827 3.827 0 0 1-.558 1.66C11.152 17.177 9.986 18 8 18c-1.987 0-3.152-.824-3.765-1.803a3.828 3.828 0 0 1-.568-1.836V14.336s0-.003 1-.003h-1V3.667h1-1v-.028a2.004 2.004 0 0 1 .01-.176 3.827 3.827 0 0 1 .558-1.66Zm1.432 1.874.002-.036a1.828 1.828 0 0 1 .262-.778C6.152 2.51 6.653 2 8 2s1.848.51 2.069.863a1.83 1.83 0 0 1 .264.814v10.646l-.002.036a1.83 1.83 0 0 1-.262.778c-.221.353-.722.863-2.07.863-1.346 0-1.847-.51-2.068-.863a1.828 1.828 0 0 1-.264-.814V3.677Zm-4.334 4.99a1 1 0 0 1 1 1v4.666l.001.03a5.657 5.657 0 0 0 .087.725c.09.49.27 1.13.62 1.76a4.464 4.464 0 0 0 1.62 1.69c.76.457 1.827.795 3.339.795s2.579-.338 3.34-.795a4.464 4.464 0 0 0 1.62-1.69c.349-.63.528-1.27.62-1.76a5.642 5.642 0 0 0 .086-.724V9.667a1 1 0 1 1 2 0v4.666h-1 1v.035a3.958 3.958 0 0 1-.016.302 7.653 7.653 0 0 1-.104.783 7.85 7.85 0 0 1-.839 2.366 6.464 6.464 0 0 1-2.338 2.434c-.902.541-2.013.914-3.37 1.037v3.377h4.334a1 1 0 0 1 0 2H2.667a1 1 0 1 1 0-2H7v-3.378c-1.356-.122-2.467-.495-3.369-1.036a6.463 6.463 0 0 1-2.339-2.434 7.852 7.852 0 0 1-.838-2.366 7.66 7.66 0 0 1-.118-1.015 3.637 3.637 0 0 1-.002-.07v-.032s0-.003 1-.003h-1V9.667a1 1 0 0 1 1-1Z"})))},em=n(62341),eg=n(19029),ep=n(3350),eh=n.n(ep),eb=n(6488),ek=n(39885);let getSpeechRecognition=()=>{let{userAgent:e}=window.navigator;return(0,ea.P)(e)?null:"undefined"!=typeof SpeechRecognition?SpeechRecognition:"undefined"!=typeof webkitSpeechRecognition?webkitSpeechRecognition:null},getMessageFromErrorEvent=(e,a)=>{switch(a.error){case"no-speech":return e("No speech was detected. Try again.");case"audio-capture":return e("No microphone was found. Ensure that a microphone is installed and that microphone settings are configured correctly.");case"not-allowed":return e("Permission to use microphone was denied. Update your browser permission settings and try again.");case"network":return e("A network error occurred. Check your internet connection and try again.");case"language-not-supported":return e("The language {{language}} is not supported by your browser.",{language:(null==a?void 0:a.target)&&"lang"in a.target&&a.target.lang||"en"});case"aborted":if("No speech detected"===a.message)return e("No speech was detected. Try again.");return null;default:return e("An error occurred: {{error}}",{error:a.error})}};let SpeechRecognitionError=class SpeechRecognitionError extends em.n9{constructor(e){let a=[e.error,e.message].filter(Boolean).join(": ");super(a),this.name="SpeechRecognitionError"}};let logErrorEvent=e=>{("aborted"!==e.error||"No speech detected"===e.message)&&(0,em.H)(new SpeechRecognitionError(e))},createRecognition=e=>{let{onStart:a,onEnd:n,onError:t,onResult:i}=e,l=getSpeechRecognition();ec()(l,"SpeechRecognition is not supported");let s=new l;return s.continuous=!0,s.interimResults=!0,s.onstart=a,s.onspeechend=()=>{s.stop()},s.onend=n,s.onerror=t,s.onresult=i,s},useSpeechRecognition=(e,a,n)=>{let{t}=(0,C.$G)(),[i,l]=(0,u.useState)(!1),s=(0,u.useRef)(!1),r=(0,u.useCallback)(()=>s.current,[]),o=(0,u.useContext)(eu.Z),d=(0,u.useRef)(null),c=(0,u.useCallback)(()=>{var e;null===(e=d.current)||void 0===e||e.stop(),d.current=null},[]),m=(0,u.useCallback)(()=>{var e;null===(e=d.current)||void 0===e||e.abort(),d.current=null},[]),g=(0,u.useCallback)(()=>{var i;let r=(null===(i=e.current)||void 0===i?void 0:i.getValue())||"",u=null==o?void 0:o.botId,m=null==o?void 0:o.model,g=null==o?void 0:o.chatId,p=createRecognition({onStart:()=>{var a,n;null===(a=e.current)||void 0===a||a.blur(),null===(n=e.current)||void 0===n||n.addEventListener("focus",c),l(!0),(0,eg.Z)("poe/action_log",{action_type:(0,ek.E)(eb.Z.start_voice_record),bot_id:u,chat_id:g,model_name:m})},onEnd:()=>{var a,n;l(!1),null===(a=e.current)||void 0===a||a.focus(),null===(n=e.current)||void 0===n||n.removeEventListener("focus",c),(0,eg.Z)("poe/action_log",{action_type:(0,ek.E)(eb.Z.finish_voice_record),bot_id:u,chat_id:g,model_name:m})},onError:e=>{logErrorEvent(e);let a=getMessageFromErrorEvent(t,e);if(a){var i;null===(i=n.current)||void 0===i||i.setTooltip(a)}},onResult:n=>{let{results:t}=n;if(d.current===p){let n=Array.from(t).filter(e=>e[0].confidence>0).map(e=>e[0].transcript).join("");if(n){var i;s.current=!0,null===(i=e.current)||void 0===i||i.setValue(r+n),a()}}}});d.current=p,p.start()},[e,a,l,n,c,t,o]);return(0,u.useEffect)(()=>{let a=e.current,resetVoiceInputWhenClearInput=e=>{""==e&&(s.current=!1)};return null==a||a.addValueChangedListener(resetVoiceInputWhenClearInput),()=>{null==a||a.removeValueChangedListener(resetVoiceInputWhenClearInput)}},[e]),(0,u.useEffect)(()=>()=>{m()},[m]),{isRunning:i,startRecognition:g,stopRecognition:c,abortRecognition:m,getVoiceInputUsed:r}},e_=(0,u.forwardRef)((e,a)=>{let{className:n,chatInputRef:t,onInputChange:i,...l}=e,s=(0,u.useRef)(null),{t:r}=(0,C.$G)(),{isRunning:d,startRecognition:c,stopRecognition:m,abortRecognition:g,getVoiceInputUsed:p}=useSpeechRecognition(t,i,s);(0,u.useImperativeHandle)(a,()=>({startRecognition:c,stopRecognition:m,abortRecognition:g,getVoiceInputUsed:p}),[c,m,g,p]);let[h,b]=(0,u.useState)(null),k=r("Use microphone");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(y.t9,{className:(0,N.$)(eh().button,n),onClick:d?m:c,ref:b,"aria-selected":!!d,...l,children:[(0,o.jsx)(E,{ref:s}),(0,o.jsx)(microphone,{})]}),(0,o.jsx)(M.Z,{anchorRef:h,label:k,placement:"top"})]})});e_.displayName="ChatMessageVoiceInputButtonInner";let ef=(0,u.forwardRef)((e,a)=>{let[n,t]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{t(!!getSpeechRecognition())},[]),n?(0,o.jsx)(e_,{ref:a,...e}):null});ef.displayName="ChatMessageVoiceInputButton";var eF=n(17259),ev=n(72566);let getInvalidMentiontedBotMessage=(e,a)=>a("The bot {{handle}} does not exist. Check for typos.",{handle:e});var inputFooter_useMultibotAtMention=e=>{let{chat:a,selectBot:t,setInputErrorMessage:i,chatInputRef:l,botSelectorRef:s}=e,r=(0,m.useFragment)(n(70275),a),o=(0,u.useRef)(null),d=(0,m.useRelayEnvironment)(),{t:c}=(0,C.$G)(),g=(0,u.useCallback)(e=>{let a=(0,K.readInlineData)(n(66348),e);if(o.current=(null==a?void 0:a.handle)||null,t(a),e){var i;null===(i=l.current)||void 0===i||i.focus()}},[l,t]),p=(0,u.useCallback)(async e=>{if(o.current===e)return;if(o.current=e,e.length<4){g(null),i(getInvalidMentiontedBotMessage(e,c));return}i(null);let a=await (0,K.fetchQuery)(d,n(15313),{handle:e,chatCode:(null==r?void 0:r.chatCode)||"",hasChat:!!r},{fetchPolicy:"store-or-network"}).toPromise();if(o.current===e){var t;g((null==a?void 0:null===(t=a.bot)||void 0===t?void 0:t.canUserAccessBot)?null==a?void 0:a.bot:null),(null==a?void 0:a.bot)&&a.bot.canUserAccessBot||i(getInvalidMentiontedBotMessage(e,c))}},[r,d,g,i,c]),h=(0,u.useCallback)(()=>{var e,a,n,t,r,o,d,c,u;let m=(null===(e=l.current)||void 0===e?void 0:e.getValue())||"",h=ev.z.exec(m),b=null==h?void 0:null===(a=h.groups)||void 0===a?void 0:a.handle;void 0!==b?((null===(n=l.current)||void 0===n?void 0:n.getSelectionStart())||0)<=b.length+1+m.indexOf("@")?(null===(r=s.current)||void 0===r||null===(t=r.setInput)||void 0===t||t.call(r,b.toLowerCase()),i(null)):(null===(d=s.current)||void 0===d||null===(o=d.setInput)||void 0===o||o.call(d,null),p(b)):(null===(u=s.current)||void 0===u||null===(c=u.setInput)||void 0===c||c.call(u,null),g(null),i(null))},[s,l,g,p,i]);return{onInputChange:h,selectBot:g}};let importAddBotToChatModal=()=>n.e(2947).then(n.bind(n,12947)),eS=c()(()=>n.e(9510).then(n.bind(n,49510)),{loadableGenerated:{webpack:()=>[49510]},ssr:!1}),eC=(0,u.forwardRef)((e,a)=>{let{bot:t,viewer:i,edges:l,chat:s,disableSend:r,onSubmitMessage:d,placeholderText:c,isBotResponding:F,fileHandlerRef:C,shouldShowNewMemberWarningModal:y,selectBot:M,setInputErrorMessage:w,onInputCleared:L}=e,T=(0,m.useFragment)(n(5466),t),I=(0,m.useFragment)(n(42785),l),{enableInputAreaForNoAccessBots:x,...A}=(0,m.useFragment)(n(50467),i),E=(0,m.useFragment)(n(60352),s),B=(0,u.useRef)(null),{isLoggedInUser:N}=(0,p.b)(),P=T.uploadFileSizeLimit,R=(0,u.useCallback)(e=>{var a,n;q((null===(n=Z.current)||void 0===n?void 0:null===(a=n.getValue())||void 0===a?void 0:a.trim())===""&&0===e.length)},[]),V=(0,u.useCallback)(e=>{var a;null===(a=B.current)||void 0===a||a.setTooltip(e)},[]),{files:G,handleFileUpload:j,handleFileRemove:U,clearFiles:O,totalFileSize:K}=(0,eF.ZP)(T,{onFileChange:R,onError:V});(0,u.useImperativeHandle)(C,()=>({handleFiles:j,clearAllFiles:O}),[j,O]);let Z=(0,u.useRef)(null),H=(0,u.useRef)(null),z=(0,u.useMemo)(()=>(0,_.Z)([Z,a]),[Z,a]),[W,q]=(0,u.useState)(!0),[$,Q]=(0,u.useState)(!1),Y=0!==G.length,X=(0,u.useRef)(null),{selectBot:J,onInputChange:ee}=inputFooter_useMultibotAtMention({chat:E||null,selectBot:M,setInputErrorMessage:w,chatInputRef:Z,botSelectorRef:X}),ea=(0,u.useCallback)(()=>{var e;let a=(null===(e=Z.current)||void 0===e?void 0:e.getValue())||"",n=(null==a?void 0:a.trim())===""&&!Y;q(n),ee(),n&&(null==L||L())},[Y,ee,L]),{isDeleted:en}=(0,k.iZ)(T),et=r||!x&&en||F||W||K>P||$,ei=(0,u.useCallback)(()=>{var e,a;if(null===(e=H.current)||void 0===e||e.abortRecognition(),navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&(null===(a=Z.current)||void 0===a||a.blur()),!et)return d(Z,H,G,O)},[Z,H,G,O,et,d]),el=(0,u.useCallback)(()=>{var e;null===(e=Z.current)||void 0===e||e.focus()},[Z]),es=(0,u.useRef)(!1);(0,u.useEffect)(()=>{var e;!N&&!0===es.current||navigator.maxTouchPoints&&navigator.maxTouchPoints>0||(null===(e=Z.current)||void 0===e||e.focus(),es.current=!0)},[T.id,N]),(0,u.useEffect)(()=>{let e=Z.current;return null==e||e.addValueChangedListener(ea),()=>{null==e||e.removeValueChangedListener(ea)}},[ea]);let er=en||!T.allowsImageAttachments&&K>P,ed=function(e){let{handleFileUpload:a,isFilePasteEnabled:n,isFileInputDisabled:t}=e;return(0,u.useCallback)(e=>{if(t||!n)return;let i=function(e){var a,n;let t=Array.from((null===(a=e.clipboardData)||void 0===a?void 0:a.files)||[]);if(0===t.length)return[];let i=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return i&&!function(e){try{var a;let n=new DOMParser().parseFromString(e,"text/html");return 1===n.body.childElementCount&&(null===(a=n.body.firstElementChild)||void 0===a?void 0:a.tagName)==="IMG"}catch(e){return console.error("there was an issue parsing pasted html"),!1}}(i)?[]:t}(e);0!==i.length&&(a(i),e.preventDefault())},[a,n,t])}({isFileInputDisabled:er,isFilePasteEnabled:A.isFilePasteEnabled,handleFileUpload:j}),{shouldPromptSubscription:ec,openPaywall:eu}=(0,g.rk)(),{logClick:em}=(0,b.hz)(T),eg=(0,u.useCallback)(()=>{em(S.Z.limited_access_bot),eu()},[em,eu]),[ep,eh]=(0,u.useState)(!1),eb=(0,u.useCallback)(()=>{if(navigator.maxTouchPoints&&navigator.maxTouchPoints>0){var e;null===(e=Z.current)||void 0===e||e.blur()}eh(!0)},[eh]),ek=(0,u.useCallback)(()=>{eh(!1),ei()},[eh,ei]),e_=(0,u.useCallback)(()=>{eh(!1)},[eh]),ev=(0,u.useMemo)(()=>({close:e_,botHandle:T.handle,onSubmitAndClose:ek}),[T.handle,e_,ek]),eC=(0,u.useRef)(!1),ey=(0,u.useCallback)(()=>{if(ec){eg();return}if(y){eb();return}ei(),eC.current||((0,f.nL)(f.wy.SendChatClicked),eC.current=!0)},[ec,ei,eg,eb,y]),eM=(0,u.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z,{isOpen:ep,onRequestClose:e_,body:importAddBotToChatModal,bodyProps:ev,variant:"compact"}),(0,o.jsxs)("div",{ref:eM,className:v().inputContainer,onClickCapture:el,children:[(0,o.jsx)(eS,{className:v().botSelector,selectorRef:X,anchorRef:eM,chatInputRef:Z,chat:E,selectBot:J,onIsActiveChange:Q}),(0,o.jsx)(eo,{ref:z,edges:I,bot:T,className:v().textArea,submitMessage:ey,onChange:ea,disabled:!x&&en,placeholderText:c,onPaste:ed,footer:(0,o.jsx)(inputFooter_ChatMessageInputAttachments,{files:G,viewer:A,onFileRemoved:U}),viewer:A}),(0,o.jsx)(D,{viewer:A,disabled:er,onFileUpload:j,ref:B}),(0,o.jsx)(ef,{ref:H,className:v().voiceInputButton,chatInputRef:Z,onInputChange:ea,disabled:en}),(0,o.jsx)(inputFooter_ChatMessageSendButton,{className:v().sendButton,bot:T,viewer:A,onClick:ey,disabled:et})]})]})});eC.displayName="ChatMessageInputContainer";var ey=eC},72566:function(e,a,n){"use strict";n.d(a,{z:function(){return t}});let t=RegExp("^(?<mention>\\s*@(?<handle>\\S*)\\s?)")},17259:function(e,a,n){"use strict";n.d(a,{$8:function(){return MessageAttachmentsProvider},cy:function(){return useMessageAttachments}});var t=n(85893),i=n(67294),l=n(22120),s=n(22578),r=n(52958),o=n(67991);let getFileSizeErrorMessage=(e,a,n)=>{let[t,i]=(0,r.w)(e);return 0==t?n("The bot you are trying to chat with does not accept attachments."):a<=1?n("The file you tried to attach is too large. Please try uploading a file that is less than {{limit, number}}.",{limit:t,style:"unit",unit:i,unitDisplay:"short"}):a>1?n("The files you tried to attach are too large. Please try uploading files that are less than {{limit, number}} total.",{limit:t,style:"unit",unit:i,unitDisplay:"short"}):void 0},d=(0,i.createContext)(null);function MessageAttachmentsProvider(e){let a=(0,i.useState)([]);return(0,t.jsx)(d.Provider,{value:a,children:e.children})}function useMessageAttachments(){let e=(0,i.useContext)(d);if(null===e)throw Error("This can only be invoked inside MessageAttachmentsProvider");return e}a.ZP=(e,a)=>{let{onFileChange:t,onError:r}=a,{uploadFileSizeLimit:d}=(0,s.useFragment)(n(35813),e),[c,u]=useMessageAttachments(),{t:m}=(0,l.$G)(),g=(0,i.useCallback)(e=>{e.forEach(e=>{(0,o.a)(e)}),u(a=>{let n=[...a,...e];return null==t||t(n),n})},[t,u]),p=(0,i.useCallback)(e=>{u(a=>{let n=a.filter((a,n)=>n!==e);return null==t||t(n),n})},[u,t]),h=(0,i.useCallback)(()=>{u(()=>(null==t||t([]),[]))},[t,u]),b=(0,i.useMemo)(()=>(function(e){let a=0;for(let n of e)a+=n.size;return a})(c),[c]);return(0,i.useEffect)(()=>{if(b>d){let e=getFileSizeErrorMessage(d,c.length,m)||"";e&&(null==r||r(e))}},[b,c.length,d,r,m]),{files:c,handleFileUpload:g,handleFileRemove:p,clearFiles:h,totalFileSize:b}}},88871:function(e,a,n){"use strict";var t=n(85893),i=n(49565),l=n(34616),s=n(15490),r=n.n(s);a.Z=e=>{let{className:a,text:n}=e;return(0,t.jsxs)("div",{className:(0,l.$)(r().banner,a),children:[(0,t.jsx)("div",{className:r().iconContainer,children:(0,t.jsx)(i.au,{size:"sm"})}),n]})}},21774:function(e,a,n){"use strict";n.d(a,{Mo:function(){return clearNonce},Us:function(){return useResendMessage},gc:function(){return setNonceArgs}});var t=n(41143),i=n.n(t),l=n(67294),s=n(22120),r=n(22578),o=n(44311),d=n(45549),c=n(59519),u=n(44912),m=n(24772);let g=new Map,getArgs=e=>{let a=g.get(e);if(!a)throw Error("No args for nonce ".concat(e));return a},setNonceArgs=(e,a)=>g.set(e,a),clearNonce=e=>g.delete(e),resendMessage=e=>{let{environment:a,message:t,bot:l,chat:s,setToast:r,setBotDetailsSidebar:d,onSuccessfulMessageSend:c,t:g}=e,{id:p,isOptimistic:h,clientNonce:b}=(0,o.readInlineData)(n(71669),t),k=(0,o.readInlineData)(n(17048),s),_=(0,o.readInlineData)(n(14973),l);i()(h&&b,"Message must be optimistic to resend");let{optimisticUpdate:f,...F}=getArgs(b);(0,o.commitLocalUpdate)(a,e=>{let a=e.get(k.id);i()(a,"Expected chat record ".concat(k.id," to exist")),(0,u.T5)(a,p)}),a.revertUpdate(f),(0,m.b)({environment:a,chat:k,bot:_,setToast:r,setBotDetailsSidebar:d,onSuccessfulMessageSend:c,t:g,...F})},useResendMessage=e=>{let{message:a,chat:n,bot:t}=e,i=(0,r.useRelayEnvironment)(),o=(0,d.ZP)(),u=(0,c.X)(),{t:m}=(0,s.$G)();return(0,l.useCallback)(function(){let{onSuccessfulMessageSend:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};resendMessage({environment:i,message:a,bot:t,chat:n,setToast:o,setBotDetailsSidebar:u,onSuccessfulMessageSend:a=>{null==e||e(a)},t:m})},[i,o,u,a,t,n,m])}},24772:function(e,a,n){"use strict";n.d(a,{b:function(){return sendMessage},$:function(){return useSendMessage}});var t=n(41143),i=n.n(t),l=n(67294),s=n(22120),r=n(22578),o=n(45549),d=n(37650),c=n(36025),u=n(59519),m=n(46857),g=n(67275),p=n(90578),h=n(50530),b=n(47875),k=n(8611),_=n(81032),f=n(44311),F=n(89083),chat_getChatContentType=e=>{let{defaultBotObject:a}=(0,f.readInlineData)(n(38117),e);return a.hasMarkdownRendering?F.Z.text_markdown:F.Z.text_plain},v=n(64211),S=n(57708),C=n(27488),y=n(44912),M=n(64076),w=n(21774);let prepareUploadables=e=>{if(!e)return[null,null];let a=Array.from(e).reduce((e,a,n)=>({...e,["file".concat(n)]:a}),{});return[a,Array.from(Object.keys(a))]},L=n(53398),sendMessage=async e=>{let{environment:a,bot:t,chat:l,prompt:s,source:o,files:u=[],existingAttachments:g=[],setToast:k,setBotDetailsSidebar:f,onSuccessfulMessageSend:F=()=>{},clientNonce:C,t:y}=e;(0,p.Si)();let M=(0,m.h0)(),{id:T,chatId:I,isOptimistic:x,defaultBotObject:A,...E}=(0,r.readInlineData)(n(92750),l),D=(0,r.readInlineData)(n(88530),t),B=g.map(e=>(0,r.readInlineData)(n(39574),e)),N=C||(0,_.C)(),P={storeUpdater:e=>{x||(0,S.x6)(e,T),(0,d.A7)(e,D.id)}};(0,w.gc)(N,{prompt:s,files:u,source:o,optimisticUpdate:P}),(0,v.Gy)(N);let{optimisticHumanMessageId:R,optimisticHumanMessageEdgeId:V}=await onMessageSendChatUpdate({environment:a,chat:E,existingAttachments:B,prompt:s,files:u,source:o,clientNonce:N}),[G,j]=prepareUploadables(u),U=await M;a.applyUpdate(P),(0,r.commitMutation)(a,{mutation:L,variables:{chatId:x?null:I,shouldFetchChat:!!x,bot:A.nickname,query:s,messagePointsDisplayPrice:D.messagePointLimit.displayMessagePointPrice,source:o,clientNonce:N,attachments:j,existingMessageAttachmentsIds:B.map(e=>e.attachmentId),sdid:U},uploadables:G,updater:(e,a)=>{var n,t,i,l;if((null===(n=a.messageEdgeCreate)||void 0===n?void 0:n.status)===b.Z.success&&(null===(t=a.messageEdgeCreate)||void 0===t?void 0:t.message)&&(null===(i=a.messageEdgeCreate)||void 0===i?void 0:i.botMessage)){onSendSuccessUpdater(e,{bot:a.messageEdgeCreate.bot,chat:E,optimisticHumanMessageEdgeId:V,messageData:a.messageEdgeCreate.message.node,botMessageData:a.messageEdgeCreate.botMessage.node});let n=a.messageEdgeCreate.chat,t=a.messageEdgeCreate.bot;x&&n&&t&&newChatUpdater(e,{bot:t,chat:n,message:a.messageEdgeCreate.message.node,optimisticChatId:T}),a.messageEdgeCreate.chat?((0,S.eM)(e,T),(0,S.x6)(e,a.messageEdgeCreate.chat.id)):(0,S.x6)(e,T),(0,d.A7)(e,D.id)}else(0,v.V8)(N),onSendFailureUpdater(e,{chatNodeId:T,optimisticHumanMessageEdgeId:V,errorMessage:null===(l=a.messageEdgeCreate)||void 0===l?void 0:l.statusMessage})},onCompleted:e=>{a.revertUpdate(P);let n=onSendMessageCompleted(e,k,f,R,N);n&&F(e)},onError:()=>{(0,v.V8)(N),(0,r.commitLocalUpdate)(a,e=>{onSendFailureUpdater(e,{chatNodeId:T,optimisticHumanMessageEdgeId:V,errorMessage:window.navigator.onLine?y("Message failed to send."):y("Unable to send this message. Check your internet connection.")})})}}),i()((0,h.h)(R),"Expected optimistic human message id to be a number"),(0,c.CE)(R,I)},onMessageSendChatUpdate=async e=>{let a,t,{environment:l,chat:s,prompt:o,files:d,existingAttachments:c,source:u,clientNonce:m}=e,{id:g,...p}=(0,r.readInlineData)(n(4690),s),b=c.map(e=>(0,r.readInlineData)(n(19984),e).id),k=await Promise.all(d.map(e=>(0,M.jH)(l,e))),_=chat_getChatContentType(p);return(0,r.commitLocalUpdate)(l,e=>{let n=e.get(g);i()(n,"Expected Chat record with id ".concat(g," to exist when sending a message"));let l=(0,M.Gx)(e,{prompt:o,attachmentIds:[...b,...k],source:u,clientNonce:m,contentType:_}),s=(0,y.n3)(e,n,l);a=s.getDataID(),t=l.getValue("messageId")}),i()((0,h.h)(t),"Expected optimistic human message id to be a number"),i()(a,"Expected optimistic human message edge id to exist"),{optimisticHumanMessageId:t,optimisticHumanMessageEdgeId:a}},onSendMessageCompleted=(e,a,n,t,l)=>{let s=e.messageEdgeCreate.status;if(s!==b.Z.success)return!1;let r=getErrorMessageFromFailedUrls(e.messageEdgeCreate.failedUrls);return r&&a({type:o.pC.error,content:r}),n(e.messageEdgeCreate.bot,!1),i()(e.messageEdgeCreate.message,"No message on a successful send message mutation"),(0,c.Ot)(t,e.messageEdgeCreate.message.node.messageId),(0,w.Mo)(l),!0},getErrorMessageFromFailedUrls=e=>{if(0===e.length)return null;let a=e[0].reason;if(1===e.length)switch(a){case"fetch_error":return"Failed to fetch ".concat(e[0].url," because of a problem crawling the URL.");case"over_budget":return"Failed to fetch ".concat(e[0].url," because it was too large. Please keep crawled web pages to <100 MB total.");case"unsupported_content_type":return"Failed to fetch ".concat(e[0].url," because it was not a supported content type.");default:return"Failed to fetch ".concat(e[0].url,".")}switch(a){case"fetch_error":return"Failed to fetch ".concat(e.length," urls because of problems crawling them.");case"over_budget":return"Failed to fetch ".concat(e.length," urls because they were too large. Please keep crawled web pages to <100 MB total.");case"unsupported_content_type":return"Failed to fetch ".concat(e.length," urls because of unsupported content types.");default:return"Failed to fetch ".concat(e.length," urls.")}},onSendSuccessUpdater=(e,a)=>{let{bot:t,chat:l,optimisticHumanMessageEdgeId:s,messageData:o,botMessageData:d}=a,{id:c,...u}=(0,r.readInlineData)(n(97048),l),m=(0,r.readInlineData)(n(60706),t),g=e.get(c),p=e.get(s);i()(g,"Expected Chat record with id ".concat(c," to exist when sending a message"));let h=(0,y.kz)(e,g,p,o),b=(0,y.Ey)(g);if((null==b?void 0:b.getDataID())===(null==h?void 0:h.getDataID())){(0,v.OE)(d.messageId.toString(),{source:"sendMessage",botId:m.botId});let a=chat_getChatContentType(u),n=(0,M.dS)(e,{contentType:a,bot:m});(0,y.n3)(e,g,n)}},newChatUpdater=(e,a)=>{let{bot:t,chat:l,message:s,optimisticChatId:o}=a,d=(0,r.readInlineData)(n(87065),l),{id:c}=(0,r.readInlineData)(n(13182),s),u=(0,r.readInlineData)(n(7741),t);(0,g.mK)(d.chatId,o);let m=e.get(d.id);i()(m,"Cannot find chat record with id ".concat(d.id)),e.getRoot().setLinkedRecord(m,"chatOfCode",{chatCode:d.chatCode});let p=(0,y.Ey)(m);if((null==p?void 0:p.getDataID())===c){let a=chat_getChatContentType(d),n=(0,M.dS)(e,{contentType:a,bot:u});(0,y.n3)(e,m,n)}},onSendFailureUpdater=(e,a)=>{var n;let{chatNodeId:t,optimisticHumanMessageEdgeId:l,errorMessage:s}=a,r=e.get(t),o=null===(n=e.get(l))||void 0===n?void 0:n.getLinkedRecord("node");i()(r,"Expected Chat record with id ".concat(t," to exist when sending a message")),i()(o,"Expected optimistic human message to exist after sending a message"),(0,C.f3)(o,k.Z.error),o.setValue(s,"errorMessage")},useSendMessage=e=>{let{source:a,bot:n,chat:t}=e,i=(0,r.useRelayEnvironment)(),d=(0,o.ZP)(),c=(0,u.X)(),{t:m}=(0,s.$G)(),g=(0,l.useCallback)(async e=>{let{prompt:l,files:s,existingAttachments:r,source:o,onSuccessfulMessageSend:u,clientNonce:g}=e;return await sendMessage({environment:i,bot:n,chat:t,prompt:l,files:s,existingAttachments:r,source:o||a,setToast:d,setBotDetailsSidebar:c,onSuccessfulMessageSend:e=>{null==u||u(e)},clientNonce:g,t:m})},[n,t,i,d,c,a,m]);return g}},42240:function(e,a,n){"use strict";n.d(a,{Y:function(){return useDragAndDrop}});var t=n(67294);let dragContainsNonFileData=e=>{var a;let n=(null===(a=e.dataTransfer)||void 0===a?void 0:a.types)||[];return n.some(e=>"Files"!==e)},useDragEventListener=(e,a,n)=>{(0,t.useEffect)(()=>{let t=e.current;return t&&n?(t.addEventListener(a,n),()=>{t.removeEventListener(a,n)}):()=>{}},[e,a,n])},onDropTargetDragOver=e=>{e.preventDefault()},useDragState=e=>{let[a,n]=(0,t.useState)(!1),i=(0,t.useRef)(0),l=(0,t.useCallback)(()=>{n(!1),i.current=0},[]),s=(0,t.useCallback)(e=>{e.preventDefault(),i.current++,dragContainsNonFileData(e)||n(!0)},[]),r=(0,t.useCallback)(e=>{e.preventDefault(),i.current--,i.current<=0&&n(!1)},[]);return useDragEventListener(e,"dragenter",s),useDragEventListener(e,"dragleave",r),useDragEventListener(e,"dragover",onDropTargetDragOver),{isDraggingOver:a,clearState:l}},useDragAndDrop=(e,a)=>{let n=(0,t.useRef)(document),{isDraggingOver:i,clearState:l}=useDragState(n),{isDraggingOver:s,clearState:r}=useDragState(e),o=(0,t.useCallback)(()=>{l(),r()},[l,r]),d=(0,t.useCallback)(e=>{e.preventDefault(),o(),dragContainsNonFileData(e)||a(e)},[o,a]);return useDragEventListener(n,"drop",o),useDragEventListener(e,"drop",d),{isDropTargetDraggingOver:s,isDocumentDraggingOver:i}}},67991:function(e,a,n){"use strict";n.d(a,{K:function(){return t},a:function(){return preloadFile}});let t=["image/jpeg","image/png"];function preloadFile(e){if(!FileReader||0!==e.size)return;let a=new FileReader;a.onload=()=>{},a.readAsBinaryString(e)}},74766:function(e,a){"use strict";var n,t;(t=n||(n={})).home_page_input="home_page_input",t.chat_history_input="chat_history_input",t.chat_settings_new_chat_button="chat_settings_new_chat_button",t.plus_new_chat_button="plus_new_chat_button",t.introduction_suggested_reply="introduction_suggested_reply",t.home_page_conversation_starter="home_page_conversation_starter",a.Z=n},87841:function(e){e.exports={dropTarget:"ChatDragDropTarget_dropTarget__1WrAL"}},70442:function(e){e.exports={button:"ChatMessageFileInputButton_button___6Emy",input:"ChatMessageFileInputButton_input__svNx4"}},47180:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",container:"ChatMessageInputAttachments_container__AAxGu",attachment:"ChatMessageInputAttachments_attachment__ZTrHT"}},38154:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",inputContainer:"ChatMessageInputContainer_inputContainer__s2AGa",botSelector:"ChatMessageInputContainer_botSelector__5QwRE",textArea:"ChatMessageInputContainer_textArea__fNi6E",sendButton:"ChatMessageInputContainer_sendButton__dBjTt",fileInput:"ChatMessageInputContainer_fileInput__9lLAY"}},68702:function(e){e.exports={noFreeMessageTooltip:"ChatMessageLimitTooltip_noFreeMessageTooltip__dMRGn",tooltipClickable:"ChatMessageLimitTooltip_tooltipClickable__gsAxK",tooltipNonClickable:"ChatMessageLimitTooltip_tooltipNonClickable__W6ZwL",tooltipMuted:"ChatMessageLimitTooltip_tooltipMuted__j1QBl",tooltipNotMuted:"ChatMessageLimitTooltip_tooltipNotMuted__S91Y8",chevronIcon:"ChatMessageLimitTooltip_chevronIcon__6MFcg"}},92002:function(e){e.exports={sendButton:"ChatMessageSendButton_sendButton__4ZyI4"}},3350:function(e){e.exports={button:"ChatMessageVoiceInputButton_button__NjXno",pulse:"ChatMessageVoiceInputButton_pulse__5F2SB",fadeInUpAndOut:"ChatMessageVoiceInputButton_fadeInUpAndOut__NP3s1"}},81952:function(e){e.exports={tooltip:"Tooltip_tooltip__1Q3kv",fadeInUpAndOut:"Tooltip_fadeInUpAndOut__BYIBO"}},25432:function(e){e.exports={dismissableContainer:"Dismissable_dismissableContainer__4Q5Jv",dismissButton:"Dismissable_dismissButton__faL3Y",icon:"Dismissable_icon__nU8Xb"}},71953:function(e){e.exports={growWrap:"GrowingTextArea_growWrap__im5W3",textArea:"GrowingTextArea_textArea__ZWQbP",hidden:"GrowingTextArea_hidden__xLW0K"}},15490:function(e){e.exports={banner:"WarningBanner_banner__otlmq",iconContainer:"WarningBanner_iconContainer__YW6xV"}}}]);